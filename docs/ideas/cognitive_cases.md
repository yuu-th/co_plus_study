# 認知プロセス改善アイデア

## 1. Interpretationの役割定義の明確化による遡及訂正 (Refined Interpretation Role)

### 背景事例: Case 2025-12-31 "お味噌か" vs "大晦日"

**事象:**
ユーザーが「今日大晦日」と言おうとしたが、STTまたは解釈が「今日、お味噌かや」と認識し、AIが味噌の話題（食事）として処理を進めた。その後ユーザーが「違う、大晦日だよ」と訂正したが、AIはこれを単なる「話題の転換」または「自分の質問が悪かったことへの訂正」として処理し、「過去の認識が間違っていた」という事実（＝実はさっきの発言も大晦日だった）に気づけなかった。

**ログ抜粋:**
```text
User: 「今日お味噌かや。」
Interpretation: 「今日の食事（味噌）の話」
Surprise: Medium (話題転換として許容)
AI: 「今日の味噌、何か特別なことあった？」
User: 「違う、大晦日だよ、今日。」
Interpretation: 「話題が味噌から大晦日に変わった」
Attribution: 「私の『味噌』質問が話題のずれを招いた」
```

### 問題点

1.  **同音異義語・音声認識の曖昧性**:
    *   `O-miso-ka` (大晦日) が `o-miso-ka-ya` (お味噌かや) 等として認識された。文脈が希薄な初期段階では防ぎようがない場合がある。

2.  **解釈の不可逆性 (Interpretation Directionality)**:
    *   現在のパイプラインは「現在の観測」を「過去の文脈」に基づいて解釈するが、「現在の観測（訂正）」に基づいて「過去の解釈」を修正するループが弱い。
    *   「違う、Xだよ」と言われた時、「今Xの話をしたい」だけでなく、「さっきの発言もXという意味だったのではないか？」という検証推論が走っていない。

### 改善案: Interpretationのプロンプトによる指示明確化

複雑なバックトラック処理や音声再照合などのメカニズムを追加するのではなく、既存の `@interpretation` ノードの役割定義（プロンプト）を強化することで解決する。

**具体的な変更方針:**

1.  **遡及的解釈 (Retroactive Check) の明文化**:
    *   `@interpretation` の役割として、「現在の発話の解釈」だけでなく、「訂正（Correction Sign）があった場合、過去の発話が実はその訂正内容であった可能性」を検討することを明記する。

2.  **プロンプトへの指示追加**:
    *   Example:
        > ⚠️ **訂正/否定のサイン (correction_sign) がある場合**:
        > ユーザーが「違う、Yだよ」と言った場合、直前の観測（STT結果）が実は Y であった可能性（聞き間違い）を必ず検討せよ。
        > もし音声的に似ている（例: お味噌 → 大晦日）なら、「話題が変わった」のではなく「最初から Y の話をしていた」という解釈ノードを作成せよ。

**期待される挙動:**
*   これまで: 「話題変更」として解釈 → 「へぇ、大晦日なんだ」
*   改善後: `interpretation` フェーズで「さっきの『お味噌』は『大晦日』の聞き間違いだった」と特定 → Responseで「あ、さっきのも『大晦日』って言ってたのか！ごめん」と自然に回収可能になる。

## 2. 広義の連想・発想力の強化 (Broad Association & Ideation)

### 課題: "発想力"と"感情想起"の弱さ
現在のAIは「大晦日」という単語を「12月31日という日付情報」として処理する傾向が強く、人間が自然に行う「大晦日といえば…？」という豊かな連想が欠けている。
*   **現状:** 「へぇ、今日は大晦日か。どう過ごすの？」（事実確認と定型質問）
*   **理想:** 「大晦日か！なんか一年終わると思うと感慨深いね」や「テレビ見てだらだらできる最高の日だね！」（情動共有）

### 改善案: Association (連想) ノードの導入
Interpretation（解釈）とUser State（相手の状態）の間、あるいは並行して、**「言葉から世界観を広げる」**ための専用工程を追加する。

**@association ノードのイメージ:**
重要なキーワード（Entity/Event）に対して、以下の多角的な連想を行う。

1.  **Emotion (感情)**: その言葉が喚起する一般的な感情（例: ワクワク、切ない、焦り）
2.  **Sensory (五感)**: 関連する感覚（例: 寒い、除夜の鐘の音、蕎麦の味、こたつの温かさ）
3.  **Culture/Memory (文化・記憶)**: 共有されている文化的コンテキスト（例: 特番、初詣の準備、一年の振り返り）

**プロンプト例:**
```text
Topic: "大晦日"
Associates:
- 感情: "一年が終わる寂しさ" "新年に向かうワクワク感" "なんとなく忙しない"
- 状況: "家族団らん" "夜更かしが許される非日常感"
- アクション: "振り返り" "年越しそば"
```

これにより、単なる質問返しではなく、「相手と同じ空気を味わう」ような発話生成につなげる。
