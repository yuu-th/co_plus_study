---
id: design-spec-diary-improvements
feature: diary
depends_on: []
scope_files:
  - specs/features/diary.md
forbidden_files:
  - frontend/src/
  - project/backlog/
created_at: 2025-11-27
---

# タスク: 学習日報機能仕様書更新

> このファイルはサブエージェントへの作業指示書です。

## 0. 最初に必ず読むファイル（スキップ禁止）

| 順序 | ファイル | 読む目的 |
|------|----------|----------|
| 1 | `specs/overview.md` | システム全体像・技術制約 |
| 2 | `specs/features/diary.md` | 既存仕様 |
| 3 | `specs/shared/conventions.md` | コーディング規約 |

## 1. タスク概要

学習日報機能の仕様書を更新する。ユーザーフィードバックをもとに、UI/UX改善の詳細を仕様に反映する。

## 2. 完了条件

- [ ] `specs/features/diary.md` が更新されている
- [ ] 以下の改善が反映されている：
  - [ ] 勉強時間入力形式（「hhh時間mm分」形式の仕様）
  - [ ] リアクション表示条件（メンター側のみ表示、ユーザー側は二重丸◎表示）
  - [ ] フィルター機能に「数学」「その他」の明示的な記載
  - [ ] 「さらに読み込む」機能の仕様明確化
- [ ] 矛盾がないこと

## 3. 編集対象ファイル

| ファイル | 操作 |
|----------|------|
| `specs/features/diary.md` | 編集 |

## 4. 具体的な改善内容

### 4.1 勉強時間入力UI
現在の仕様:
- duration: number（分単位）

改善後:
- 入力形式: 「h:mm」または「hh:mm」または「hhh:mm」
- 表示形式: 「XXX時間YY分」（例: 「1時間30分」、「2時間5分」）
- バリデーション: 0〜999時間59分

### 4.2 リアクション機能の役割分離
現在:
- DiaryPost.reactions: 誰でもリアクション可能

改善後:
- ユーザー（生徒）側: 日報一覧で大きな二重丸◎を表示（リアクション不可）
- メンター側: リアクション5種類（👍❤️🎉👏🔥）を表示・操作可能
- データ: メンター側リアクション情報を記録

### 4.3 フィルター機能
現在の教科: 国語、算数、理科、社会、英語、その他

改善後:
- 仕様に「その他」カテゴリを明示的に含める
- 「数学」という呼称の統一（「算数」から「数学」への表記ゆれ確認）

### 4.4 ページング
改善項目:
- 「さらに読み込む」が正常に動作するための仕様明確化
- 一度のロード件数、スクロール終端での自動読み込み等

## 5. 変更履歴セクション

既存の変更履歴を保持し、新しいエントリを追加:

```
| 2025-11-27 | UI/UX改善: 時間入力形式、リアクション表示条件、フィルター仕様更新 |
```

## 6. 注意事項

- 型定義（`types/diary.ts`）は後続タスクで更新
- 実装コンポーネント更新は別タスク
- 仕様のみ最新化

## 7. 完了報告

```markdown
## 完了報告

### タスクID
design-spec-diary-improvements

### 編集ファイル
- `specs/features/diary.md` - 更新

### 主要な変更点
- 勉強時間入力形式を「XXX時間YY分」に統一
- リアクション表示条件をメンター側に限定、ユーザー側は◎表示
- フィルター・ページング仕様を明確化

### 未解決の問題
- なし
```
