---
id: design-spec-survey-improvements
feature: survey
depends_on: []
scope_files:
  - specs/features/survey.md
forbidden_files:
  - frontend/src/
  - project/backlog/
created_at: 2025-11-27
---

# タスク: アンケート機能仕様書更新

> このファイルはサブエージェントへの作業指示書です。

## 0. 最初に必ず読むファイル（スキップ禁止）

| 順序 | ファイル | 読む目的 |
|------|----------|----------|
| 1 | `specs/overview.md` | システム全体像・技術制約 |
| 2 | `specs/features/survey.md` | 既存仕様 |
| 3 | `specs/shared/conventions.md` | コーディング規約 |

## 1. タスク概要

アンケート機能の仕様書を更新する。ユーザーフィードバックをもとに、質問内容、UI改善、星評価表示を反映する。

## 2. 完了条件

- [ ] `specs/features/survey.md` が更新されている
- [ ] 以下の改善が反映されている：
  - [ ] タイトル改善ガイドライン
  - [ ] 「学習満足度」の定義見直し→「サービス使いやすさ」「勉強が楽しいか」等に変更
  - [ ] 送信ボタンUI仕様
  - [ ] 星評価（☆アイコン表示）の仕様
  - [ ] カラー選択設問の仕様
- [ ] 矛盾がないこと

## 3. 編集対象ファイル

| ファイル | 操作 |
|----------|------|
| `specs/features/survey.md` | 編集 |

## 4. 具体的な改善内容

### 4.1 タイトル改善
現在: 仕様書での「タイトル」のガイドラインなし
改善後: 以下のガイドラインを追加

```markdown
#### タイトル命名ルール
- 簡潔で、生徒が目的を理解しやすい文言
- 例: ❌「学習体験アンケート」→ ✅「勉強のことをききかせてね！」
- 親しみやすいトーン（「～ね」「～かな」等）
```

### 4.2 質問内容の定義見直し
現在: 「学習満足度」という曖昧な質問

改善後: より具体的で意図が明確な質問に変更

推奨される質問例:
| 質問ID | タイプ | 例 |
|--------|--------|-----|
| q1 | rating | 「このアプリは使いやすいですか？」（☆1～5） |
| q2 | rating | 「勉強は楽しいですか？」（☆1～5） |
| q3 | single | 「一番よく使う機能は？」（選択肢: 日報、相談、実績等） |
| q4 | text | 「良かった点は何ですか？」（自由記述） |
| q5 | text | 「改善してほしいことはありますか？」（自由記述） |

### 4.3 送信ボタンのUI仕様
現在: 送信ボタンの仕様が不明確
改善後:

```markdown
#### 送信ボタン
- 大きめのサイズ（最小 48px × 48px の タッチターゲット）
- 色: `--color-accent-blue` または `--color-accent-orange`
- 状態:
  - 必須項目未入力時: 無効状態（グレーアウト、クリック不可）
  - 有効時: アクティブな色、ホバーで濃くなる
- テキスト: 「送信する」（「送信」ではなく「～する」で統一）
- 位置: フォーム下部、右寄せ（または中央）
```

### 4.4 星評価表示（rating タイプ）の改善
現在の仕様: 「rating」タイプは「1-5の整数」だけ

改善後:
```typescript
// Question型に以下を追加
interface Question {
  // ...既存フィールド...
  
  // rating タイプ用
  ratingStyle?: 'numeric' | 'emoji';  // 表示方式
}

// rating タイプの表示方式:
// - numeric: 1 2 3 4 5（数字）
// - emoji: ☆ ☆☆ ☆☆☆ ☆☆☆☆ ☆☆☆☆☆（星アイコン）推奨
```

UI仕様:
- デフォルトは `emoji` で「☆☆☆☆☆」を大きく表示
- タップ/クリック時に色が付く
- 色: `--color-badge-gold` など

### 4.5 カラー選択設問（新）
現在: なし
改善後: 新しい質問タイプ `color` を追加

```typescript
type QuestionType = 'single' | 'multiple' | 'text' | 'rating' | 'color';

// color タイプの仕様
interface ColorQuestion extends Question {
  type: 'color';
  options: ColorOption[];
}

interface ColorOption {
  id: string;
  label: string;
  colorCode: string;  // e.g., "#FF6B9D"
}
```

UI仕様:
- カラースウォッチを並べて表示
- タップで選択（複数選択可か単一選択かは `required` フィールドで指定）
- 選択済みにチェックマークを表示

### 4.6 一覧表示の改善
現在: デスクトップ3列、モバイル1列

改善要求: 「タイトルが悪い」→ サーベイカードのタイトル表示を目立たせる

仕様の指針:
```markdown
#### SurveyCard表示
- タイトルは目立つサイズで表示
- 説明文（description）も表示
- 「〇日後まで」という期限表示を強調
- 回答済みマークは視認性を高める
```

## 5. 変更履歴セクション

既存の変更履歴を保持し、新しいエントリを追加:

```
| 2025-11-27 | UI/UX改善: タイトルガイドライン、質問内容の具体化、星評価☆表示、カラー選択設問追加 |
```

## 6. 注意事項

- 型定義（`types/survey.ts`）は後続タスクで更新
- 実装コンポーネント更新は別タスク
- 新しい質問タイプ（`color`）追加により、コンポーネント対応が必要

## 7. 完了報告

```markdown
## 完了報告

### タスクID
design-spec-survey-improvements

### 編集ファイル
- `specs/features/survey.md` - 更新

### 主要な変更点
- タイトル命名ルール追加
- 「学習満足度」を具体的な質問に変更（サービス使いやすさ、勉強の楽しさ等）
- 送信ボタンUI仕様を明確化
- 星評価を☆アイコン表示に対応
- 新規: カラー選択設問タイプを追加

### 未解決の問題
- なし
```
